<html>
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<title>Problem statement</title>
</head>
<body>
<h3>Problem mz05-5: mz05-5</h3>
<p>Напишите функцию:</p>
<pre>int copy_file(const char *srcpath, const char *dstpath);</pre>

<p>srcpath должен быть путем к существующему файлу, доступному на чтение.
srcpath не должен быть каталогом.</p>

<p>Если dstpath существует и является каталогом, то файл srcpath должен быть скопирован в каталог dstpath,
при этом имя файла в каталоге dstpath должно совпадать с последней компонентой пути srcpath.</p>

<p>Если dstpath не существует или не является каталогом, файл dstpath перезаписывается.</p>

<p>Должна быть предусмотрена защита в случае, когда входной файл совпадает с выходным файлом.
В этом случае должно возвращаться 0 и не выполняться никаких действий.</p>

<p>При успешном выполнении функция должна возвращать 0. При ошибке функция должна возвращать -1.
Все ресурсы должны быть освобождены.</p>

<p>Для копирования файлов должны должны использоваться системные вызовы read, write.
Для временного хранения данных должен использоваться внутренний буфер размером 4 кб.
</p>

<p>Права доступа к файлу-копии должны совпадать с правами доступа к исходному файлу.</p>

<p>Символические ссылки специальным образом не обрабатывать.</p>

</body>
</html>
