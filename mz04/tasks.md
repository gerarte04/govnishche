### Problem mz04-1: mz04-1

Компьютерная система Pensieve имеет следующие свойства: ```CHAR_BIT == 12```, ```sizeof(unsigned short) == 2```, целые числа записываются в порядке байт Big endian. Для совместимости с компьютерами, у которых ```CHAR_BIT == 8```, файлы для Pensieve записываются в формате, в котором каждые 12 бит хранятся в двух 8-битных байтах в Big endian формате. В первом (старшем) байте используются только 4 младших бита, а старшие 4 бита всегда нулевые.

Таким образом, 24-битное число 0x123456 будет храниться в файле для обработки на Pensieve как последовательность байт 0x01 0x23 0x04 0x56.

Напишите программу, которая будет формировать выходной файл для Pensieve из последовательности чисел в десятичном виде. На стандартном потоке ввода подается последовательность 24-битных беззнаковых целых чисел в десятичном виде. Имя выходного файла указывается в командной строке. Выходной файл должен быть создан с правами только на чтение и запись только для владельца, если он не существовал. Если файл существовал, права доступа не меняйте.

Для записи выходного файла используйте POSIX API. Для записи чисел используйте системный вызов ```write```, в который передается буфер размера 32 бита.

Предполагайте, что на компьютере, на котором выполняется программа, ```CHAR_BIT == 8```. Все системные вызовы завершаются успешно.

### Problem mz04-2: mz04-2

Программе передаются два аргумента командной строки: имя файла для обработки (FILE), затем число элементов для обработки (N). Файл для обработки — это бинарный файл, содержащий вещественные числа двойной точности. Размер файла всегда кратен размеру одного числа. Если файл не содержит чисел или содержит только одно число, он не изменяется. Если файл содержит более одного числа, первое число не изменяется, а i-е число в файле после обработки вычисляется по формуле ```out[i] = in[i] - out[i - 1]```, где ```out``` – содержимое файла после обработки, а ```in``` – содержимое файла до обработки. Число N определяет максимальное количество обрабатываемых чисел, то есть если в файле более N чисел, то обрабатываются первые N чисел, а остальные не изменяются. ```in[0]``` учитывается в числе N. Таким образом, при N < 1 входной файл вообще не изменяется.

Для работы с файлом необходимо использовать средства низкоуровневого ввода-вывода. Программа должна завершать свое выполнение с кодом возврата 0. Не держите в памяти больше двух чисел из файла одновременно. Для перемещения по файлу используйте ```lseek```.

Пример входных данных:

```
1 2 3 4 5 6 7 8 9
```

Результат работы при N = 4:

```
1 1 2 2 5 6 7 8 9
```

### Problem mz04-3: mz04-3

В аргументах командной строки задается путь к бинарному файлу, содержащему целые знаковые числа типа ```long long```, записанные в порядке байт хоста (компьютера, на котором исполняется программа). В файле найдите минимальное число и поменяйте его знак. Если минимальное число в файле встречается несколько раз, поменяйте знак только у первого по порядку минимального числа. При вычислениях предполагайте неограниченную битность, но в качестве результата оставьте младшие 64 бита.

Для работы с файлом используйте POSIX API. Допускается только один проход по файлу, но бинарный файл является файлом произвольного доступа.

На 32-битных системах компилируйте вашу программу с опцией ```-D_FILE_OFFSET_BITS=64```. Не допускайте в программе undefined behavior.

Например, если дан входной бинарный файл ```input.bin```, результатом обработки его должен быть файл распечатка содержимого которого показана ниже.

```
hexdump -C input.bin
00000000  03 00 00 00 00 00 00 00  fe ff ff ff ff ff ff ff  |................|
00000010  04 00 00 00 00 00 00 00                           |........|
00000018
```

### Problem mz04-4: mz04-4

В аргументах командной строки задается имя входного бинарного файла произвольного доступа. Бинарный файл рассматривается как массив структур:

```
struct Node
{
    int32_t key;
    int32_t left_idx;
    int32_t right_idx;
};
```

Структура описывает вершину бинарного дерева поиска, где ```key``` – ключ поиска, а значения ```left_idx``` и ```right_idx``` – индексы в массиве соответственно левой и правой вершины. Корень дерева находится в элементе массива с индексом 0. Признаком отсутствия соответствующего поддерева в вершине является индекс, равный 0.

Числа в файле хранятся в Big-Endian представлении.

На стандартный поток вывода напечатайте ключи, размещенные в данном дереве, в порядке убывания.

Для чтения содержимого файла необходимо пользоваться низкоуровневым вводом-выводом (```open```/```read```/etc). Для вывода ключей можно использовать высокоуровневые потоки (stdout). Не забывайте выводить ```'\n'``` в конце вывода.

В программе должна быть реализована проверка корректности чтения из файла. Минимизируйте число системных вызовов, необходимых для чтения одной записи из файла.

Считывать содержимое всего файла в память целиком одним или несколькими блоками запрещается. Программа должна корректно работать и на Big-Endian, и на Little-Endian процессорах. Не используйте низкоуровневые манипуляции с памятью (```union```, приведение типов указателей). Не используйте библиотечные функции преобразования.

### Problem mz04-5: mz04-5

В аргументах командной строки задаются имя входного бинарного файла (FILE1), имя выходного бинарного файла (FILE2) и положительное 32-битное знаковое целое число (MOD). Файл FILE1 содержит множество положительных целых чисел, представленное в виде битового массива. Бит 0 (младший бит первого байта) в файле соответствует числу 1, бит 7 (старший бит первого байта) в файле соответствует числу 8 и т. д. Установленный бит означает, что соответствующее число присутствует во множестве. Для каждого числа x, присутствующего во множестве, хранящемся в FILE1, в бинарный файл FILE2 запишите 32-битное знаковое целое число  
$\sum_{i=1}^{x} {i^2} \pmod{MOD}$,  
то есть остаток от деления на MOD суммы квадратов всех чисел от 1 до x включительно. Числа должны быть записаны в порядке возрастания значения x. Числа записываются в порядке байт хоста. Для работы с файлами использовать интерфейс системных вызовов.

Например, если входной бинарный файл содержит байт 0x93, и значение MOD равно 1000, то в выходной бинарный файл должны быть записаны числа 1, 5, 55, 204.